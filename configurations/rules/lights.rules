val tso_hall = 0 // ticks since on

rule "light cron"
when Time cron "* * * * * ?" then
    tso_hall += 1
    if (tso_hall > 10 * 60) {
        if( Light1_Toggle.state == ON || Light2_Toggle.state == ON ) { 
             logInfo("FILE", " && shutting hall lights off automatically, light states: " + Light1_Toggle.state + " " + Light2_Toggle.state)
             Light1_Toggle.sendCommand("OFF")
             Light2_Toggle.sendCommand("OFF") 
        }
    }
end

rule "Tate room midnight"
when Time cron "0 1 0 1/1 * ? *" then
     Light3_Toggle.sendCommand("OFF")
     Light4_Toggle.sendCommand("OFF") 
     Light5_Toggle.sendCommand("OFF") 
     Light6_Toggle.sendCommand("OFF") 
end

rule "Tate room 8am"
when Time cron "8 0 0 1/1 * ? *" then
     Light3_Toggle.sendCommand("OFF")
     Light4_Toggle.sendCommand("OFF") 
     Light5_Toggle.sendCommand("OFF") 
     Light6_Toggle.sendCommand("OFF") 
end

    

rule "hall lights"
when 
    Item Light1_Toggle changed to ON or
    Item Light2_Toggle changed to ON
then
    logInfo("FILE", " && Hall light on detected, light states: " + Light1_Toggle.state + " " + Light2_Toggle.state)
    tso_hall = 0
end

